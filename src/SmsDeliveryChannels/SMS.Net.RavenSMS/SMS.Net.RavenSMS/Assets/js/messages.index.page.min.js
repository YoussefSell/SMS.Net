$('a[data-bs-toggle="tab"]').on("click",function(a){loadData()}),$("#search-period").daterangepicker({ranges:{Today:[moment(),moment()],"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]}},setDateRange);let messages=[],startDate=null,endDate=null;function loadData(){var a={pageIndex:1,pageSize:5,searchQuery:$("#search-query").val(),endDate:endDate.format("yyyy-MM-DDTHH:mm:ssZ"),startDate:startDate.format("yyyy-MM-DDTHH:mm:ssZ"),Status:$("nav#messages-status a.active").attr("value"),to:[],from:[],clients:[]};console.log(a),$.ajax({url:"/ravenSMS/messages/index/?handler=Messages",data:a,success:function(a){messages=a.data;const t=$("#messages_table");$("#messages_table > tbody").empty(),$.each(messages,function(){t.append(buildTableRow(this))}),SetPagination(a.pagination.rowsCount,a.pagination.pageIndex,a.pagination.pageSize)}})}function buildTableRow(a){const t=moment(a.date);return`<tr>
            <td style="max-width:150px" class="cell">${a.id}</td>
            <td class="cell"><span class="truncate">${a.client.name}</span></td>
            <td class="cell">${a.to}</td>
            <td class="cell"><span>${t.format("DD/MMM/YYYY")}</span><span class="note">${t.format("hh:mm A")}</span></td>
            <td class="cell">${GetStatusSpan(a.status)}</td>
            <td class="cell">
                <a class="btn-sm app-btn-secondary" href="Messages/Preview/${a.id}">View</a>
            </td>
        </tr>`}function SetPagination(a,t,e){const s=$("#paginator");s.empty(),s.append(`
            <li class="page-item disabled">
                <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a>
            </li>
        `);const n=paginate(a,t,e);$.each(n.pages,function(){s.append(`<li class="page-item ${this==n.currentPage?"active":""}"><a class="page-link" href="#">${this}</a></li>`)}),s.append(`
            <li class="page-item">
                <a class="page-link" href="#">Next</a>
            </li>
        `)}function GetStatusSpan(a){switch(a){case 1:return'<span class="badge bg-warning">Queued</span>';case 2:return'<span class="badge bg-danger">Failed</span>';case 3:return'<span class="badge bg-success">Sent</span>';default:return'<span class="badge bg-secondary">Created</span>'}}function setDateRange(a,t){startDate=a,endDate=t,$("#search-period span").html(a.format("MMMM D, YYYY")+" - "+t.format("MMMM D, YYYY"))}setDateRange(moment().subtract(29,"days"),moment()),loadData();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIiQiLCJvbiIsImUiLCJsb2FkRGF0YSIsImRhdGVyYW5nZXBpY2tlciIsInJhbmdlcyIsIlRvZGF5IiwibW9tZW50IiwiTGFzdCA3IERheXMiLCJzdWJ0cmFjdCIsIkxhc3QgMzAgRGF5cyIsIlRoaXMgTW9udGgiLCJzdGFydE9mIiwiZW5kT2YiLCJMYXN0IE1vbnRoIiwic2V0RGF0ZVJhbmdlIiwibWVzc2FnZXMiLCJzdGFydERhdGUiLCJlbmREYXRlIiwicmVxdWVzdERhdGEiLCJwYWdlSW5kZXgiLCJwYWdlU2l6ZSIsInNlYXJjaFF1ZXJ5IiwidmFsIiwiZm9ybWF0IiwiU3RhdHVzIiwiYXR0ciIsInRvIiwiZnJvbSIsImNsaWVudHMiLCJjb25zb2xlIiwibG9nIiwiYWpheCIsInVybCIsImRhdGEiLCJzdWNjZXNzIiwicmVzdWx0IiwiJHRhYmxlIiwiZW1wdHkiLCJlYWNoIiwiYXBwZW5kIiwiYnVpbGRUYWJsZVJvdyIsInRoaXMiLCJTZXRQYWdpbmF0aW9uIiwicGFnaW5hdGlvbiIsInJvd3NDb3VudCIsIm1lc3NhZ2UiLCJtZXNzYWdlRGF0ZSIsImRhdGUiLCJpZCIsImNsaWVudCIsIm5hbWUiLCJHZXRTdGF0dXNTcGFuIiwic3RhdHVzIiwiJHBhZ2luYXRvciIsInBhZ2luYXRlIiwicGFnZXMiLCJjdXJyZW50UGFnZSIsInN0YXJ0IiwiZW5kIiwiaHRtbCJdLCJtYXBwaW5ncyI6IkFBQUFBLEVBQUUsMkJBQTJCQyxHQUFHLFFBQVMsU0FBVUMsR0FDL0NDLGFBSUpILEVBQUUsa0JBQWtCSSxnQkFBZ0IsQ0FDaENDLE9BQVEsQ0FDSkMsTUFBUyxDQUFDQyxTQUFVQSxVQUNwQkMsY0FBZSxDQUFDRCxTQUFTRSxTQUFTLEVBQUcsUUFBU0YsVUFDOUNHLGVBQWdCLENBQUNILFNBQVNFLFNBQVMsR0FBSSxRQUFTRixVQUNoREksYUFBYyxDQUFDSixTQUFTSyxRQUFRLFNBQVVMLFNBQVNNLE1BQU0sVUFDekRDLGFBQWMsQ0FBQ1AsU0FBU0UsU0FBUyxFQUFHLFNBQVNHLFFBQVEsU0FBVUwsU0FBU0UsU0FBUyxFQUFHLFNBQVNJLE1BQU0sWUFFeEdFLGNBR0gsSUFBSUMsU0FBVyxHQUNYQyxVQUFZLEtBQ1pDLFFBQVUsS0FRZCxTQUFTZixXQUNMLElBQU1nQixFQUFjLENBQ2hCQyxVQUFXLEVBQ1hDLFNBQVUsRUFDVkMsWUFBYXRCLEVBQUUsaUJBQWlCdUIsTUFDaENMLFFBQVNBLFFBQVFNLE9BQU8sd0JBQ3hCUCxVQUFXQSxVQUFVTyxPQUFPLHdCQUM1QkMsT0FBUXpCLEVBQUUsZ0NBQWdDMEIsS0FBSyxTQUMvQ0MsR0FBSSxHQUNKQyxLQUFNLEdBQ05DLFFBQVMsSUFFYkMsUUFBUUMsSUFBSVosR0FFWm5CLEVBQUVnQyxLQUFLLENBQ0hDLElBQUssNkNBQ0xDLEtBQU1mLEVBQ05nQixRQUFTLFNBQVVDLEdBRWZwQixTQUFXb0IsRUFBT0YsS0FHbEIsTUFBTUcsRUFBU3JDLEVBQUUsbUJBR2pCQSxFQUFFLDJCQUEyQnNDLFFBRzdCdEMsRUFBRXVDLEtBQUt2QixTQUFVLFdBQ2JxQixFQUFPRyxPQUFPQyxjQUFjQyxTQUloQ0MsY0FDSVAsRUFBT1EsV0FBV0MsVUFDbEJULEVBQU9RLFdBQVd4QixVQUNsQmdCLEVBQU9RLFdBQVd2QixhQU1sQyxTQUFTb0IsY0FBY0ssR0FDbkIsTUFBTUMsRUFBY3hDLE9BQU91QyxFQUFRRSxNQUVuQzt1REFDbURGLEVBQVFHO3NEQUNUSCxFQUFRSSxPQUFPQzsrQkFDdENMLEVBQVFuQjtxQ0FDRm9CLEVBQVl2QixPQUFPLDJDQUEyQ3VCLEVBQVl2QixPQUFPOytCQUN2RjRCLGNBQWNOLEVBQVFPOzs2RUFFd0JQLEVBQVFHOztlQUtyRixTQUFTTixjQUFjRSxFQUFXekIsRUFBV0MsR0FFekMsTUFBTWlDLEVBQWF0RCxFQUFFLGNBR3JCc0QsRUFBV2hCLFFBR1hnQixFQUFXZDs7OztXQU9YLE1BQU1JLEVBQWFXLFNBQVNWLEVBQVd6QixFQUFXQyxHQUdsRHJCLEVBQUV1QyxLQUFLSyxFQUFXWSxNQUFPLFdBQ3JCRixFQUFXZCwrQkFBK0JFLE1BQVFFLEVBQVdhLFlBQWMsU0FBVyxxQ0FBcUNmLG1CQUkvSFksRUFBV2Q7Ozs7V0FPZixTQUFTWSxjQUFjQyxHQUNuQixPQUFRQSxHQUNKLEtBQUssRUFBRyxNQUFPLCtDQUNmLEtBQUssRUFBRyxNQUFPLDhDQUNmLEtBQUssRUFBRyxNQUFPLDZDQUNmLFFBQVMsTUFBTyxtREFJeEIsU0FBU3RDLGFBQWEyQyxFQUFPQyxHQUV6QjFDLFVBQVl5QyxFQUNaeEMsUUFBVXlDLEVBR1YzRCxFQUFFLHVCQUF1QjRELEtBQUtGLEVBQU1sQyxPQUFPLGdCQUFrQixNQUFRbUMsRUFBSW5DLE9BQU8saUJBM0dwRlQsYUFBYVIsU0FBU0UsU0FBUyxHQUFJLFFBQVNGLFVBRzVDSiIsImZpbGUiOiJtZXNzYWdlcy5pbmRleC5wYWdlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoJ2FbZGF0YS1icy10b2dnbGU9XCJ0YWJcIl0nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgbG9hZERhdGEoKTtcclxufSk7XHJcblxyXG4vLyBpbml0IHRoZSBkYXRlIHJhbmdlIHBpY2tlclxyXG4kKFwiI3NlYXJjaC1wZXJpb2RcIikuZGF0ZXJhbmdlcGlja2VyKHtcclxuICAgIHJhbmdlczoge1xyXG4gICAgICAgICdUb2RheSc6IFttb21lbnQoKSwgbW9tZW50KCldLFxyXG4gICAgICAgICdMYXN0IDcgRGF5cyc6IFttb21lbnQoKS5zdWJ0cmFjdCg2LCAnZGF5cycpLCBtb21lbnQoKV0sXHJcbiAgICAgICAgJ0xhc3QgMzAgRGF5cyc6IFttb21lbnQoKS5zdWJ0cmFjdCgyOSwgJ2RheXMnKSwgbW9tZW50KCldLFxyXG4gICAgICAgICdUaGlzIE1vbnRoJzogW21vbWVudCgpLnN0YXJ0T2YoJ21vbnRoJyksIG1vbWVudCgpLmVuZE9mKCdtb250aCcpXSxcclxuICAgICAgICAnTGFzdCBNb250aCc6IFttb21lbnQoKS5zdWJ0cmFjdCgxLCAnbW9udGgnKS5zdGFydE9mKCdtb250aCcpLCBtb21lbnQoKS5zdWJ0cmFjdCgxLCAnbW9udGgnKS5lbmRPZignbW9udGgnKV1cclxuICAgIH1cclxufSwgc2V0RGF0ZVJhbmdlKTtcclxuXHJcbi8vIGluaXQgdGhlIHJlcXVpcmVkIHZhcmlhYmxlc1xyXG5sZXQgbWVzc2FnZXMgPSBbXTtcclxubGV0IHN0YXJ0RGF0ZSA9IG51bGw7XHJcbmxldCBlbmREYXRlID0gbnVsbDtcclxuXHJcbi8vIHNldCB0aGUgZGF0ZSByYW5nZSBpbml0aWFsIHZhbHVlXHJcbnNldERhdGVSYW5nZShtb21lbnQoKS5zdWJ0cmFjdCgyOSwgJ2RheXMnKSwgbW9tZW50KCkpO1xyXG5cclxuLy8gbG9hZCB0aGUgaW5pdGlhbCBkYXRhXHJcbmxvYWREYXRhKCk7XHJcblxyXG5mdW5jdGlvbiBsb2FkRGF0YSgpIHtcclxuICAgIGNvbnN0IHJlcXVlc3REYXRhID0ge1xyXG4gICAgICAgIHBhZ2VJbmRleDogMSxcclxuICAgICAgICBwYWdlU2l6ZTogNSxcclxuICAgICAgICBzZWFyY2hRdWVyeTogJChcIiNzZWFyY2gtcXVlcnlcIikudmFsKCksXHJcbiAgICAgICAgZW5kRGF0ZTogZW5kRGF0ZS5mb3JtYXQoJ3l5eXktTU0tRERUSEg6bW06c3NaJyksXHJcbiAgICAgICAgc3RhcnREYXRlOiBzdGFydERhdGUuZm9ybWF0KCd5eXl5LU1NLUREVEhIOm1tOnNzWicpLFxyXG4gICAgICAgIFN0YXR1czogJCgnbmF2I21lc3NhZ2VzLXN0YXR1cyBhLmFjdGl2ZScpLmF0dHIoJ3ZhbHVlJyksXHJcbiAgICAgICAgdG86IFtdLFxyXG4gICAgICAgIGZyb206IFtdLFxyXG4gICAgICAgIGNsaWVudHM6IFtdLFxyXG4gICAgfTtcclxuICAgIGNvbnNvbGUubG9nKHJlcXVlc3REYXRhKTtcclxuXHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogJy9yYXZlblNNUy9tZXNzYWdlcy9pbmRleC8/aGFuZGxlcj1NZXNzYWdlcycsXHJcbiAgICAgICAgZGF0YTogcmVxdWVzdERhdGEsXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAvLyBzYXZlIHRoZSByZXN1bHRcclxuICAgICAgICAgICAgbWVzc2FnZXMgPSByZXN1bHQuZGF0YTtcclxuXHJcbiAgICAgICAgICAgIC8vIHNlbGVjdCB0YWJsZSBlbGVtZW50XHJcbiAgICAgICAgICAgIGNvbnN0ICR0YWJsZSA9ICQoXCIjbWVzc2FnZXNfdGFibGVcIik7XHJcblxyXG4gICAgICAgICAgICAvLyBlbXB0eSB0aGUgdGFibGVcclxuICAgICAgICAgICAgJChcIiNtZXNzYWdlc190YWJsZSA+IHRib2R5XCIpLmVtcHR5KCk7XHJcblxyXG4gICAgICAgICAgICAvLyBhZGQgdGhlIGRhdGEgdG8gdGhlIHRhYmxlXHJcbiAgICAgICAgICAgICQuZWFjaChtZXNzYWdlcywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHRhYmxlLmFwcGVuZChidWlsZFRhYmxlUm93KHRoaXMpKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBzZXQgdGhlIHBhZ2luYXRpb24gZGV0YWlsc1xyXG4gICAgICAgICAgICBTZXRQYWdpbmF0aW9uKFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnBhZ2luYXRpb24ucm93c0NvdW50LFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnBhZ2luYXRpb24ucGFnZUluZGV4LFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnBhZ2luYXRpb24ucGFnZVNpemUsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJ1aWxkVGFibGVSb3cobWVzc2FnZSkge1xyXG4gICAgY29uc3QgbWVzc2FnZURhdGUgPSBtb21lbnQobWVzc2FnZS5kYXRlKTtcclxuXHJcbiAgICByZXR1cm4gYDx0cj5cclxuICAgICAgICAgICAgPHRkIHN0eWxlPVwibWF4LXdpZHRoOjE1MHB4XCIgY2xhc3M9XCJjZWxsXCI+JHttZXNzYWdlLmlkfTwvdGQ+XHJcbiAgICAgICAgICAgIDx0ZCBjbGFzcz1cImNlbGxcIj48c3BhbiBjbGFzcz1cInRydW5jYXRlXCI+JHttZXNzYWdlLmNsaWVudC5uYW1lfTwvc3Bhbj48L3RkPlxyXG4gICAgICAgICAgICA8dGQgY2xhc3M9XCJjZWxsXCI+JHttZXNzYWdlLnRvfTwvdGQ+XHJcbiAgICAgICAgICAgIDx0ZCBjbGFzcz1cImNlbGxcIj48c3Bhbj4ke21lc3NhZ2VEYXRlLmZvcm1hdCgnREQvTU1NL1lZWVknKX08L3NwYW4+PHNwYW4gY2xhc3M9XCJub3RlXCI+JHttZXNzYWdlRGF0ZS5mb3JtYXQoJ2hoOm1tIEEnKX08L3NwYW4+PC90ZD5cclxuICAgICAgICAgICAgPHRkIGNsYXNzPVwiY2VsbFwiPiR7R2V0U3RhdHVzU3BhbihtZXNzYWdlLnN0YXR1cyl9PC90ZD5cclxuICAgICAgICAgICAgPHRkIGNsYXNzPVwiY2VsbFwiPlxyXG4gICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJidG4tc20gYXBwLWJ0bi1zZWNvbmRhcnlcIiBocmVmPVwiTWVzc2FnZXMvUHJldmlldy8ke21lc3NhZ2UuaWR9XCI+VmlldzwvYT5cclxuICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICA8L3RyPmBcclxufVxyXG5cclxuZnVuY3Rpb24gU2V0UGFnaW5hdGlvbihyb3dzQ291bnQsIHBhZ2VJbmRleCwgcGFnZVNpemUpIHtcclxuICAgIC8vIHNlbGVjdCB0aGUgcGFnaW5hdG9yXHJcbiAgICBjb25zdCAkcGFnaW5hdG9yID0gJChcIiNwYWdpbmF0b3JcIik7XHJcblxyXG4gICAgLy8gZW1wdHkgdGhlIHBhZ2luYXRvclxyXG4gICAgJHBhZ2luYXRvci5lbXB0eSgpO1xyXG5cclxuICAgIC8vIGFwcGVuZCB0aGUgcHJldmlvdXMgYnV0dG9uXHJcbiAgICAkcGFnaW5hdG9yLmFwcGVuZChgXHJcbiAgICAgICAgICAgIDxsaSBjbGFzcz1cInBhZ2UtaXRlbSBkaXNhYmxlZFwiPlxyXG4gICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJwYWdlLWxpbmtcIiBocmVmPVwiI1wiIHRhYmluZGV4PVwiLTFcIiBhcmlhLWRpc2FibGVkPVwidHJ1ZVwiPlByZXZpb3VzPC9hPlxyXG4gICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgIGApO1xyXG5cclxuICAgIC8vIGdldCB0aGUgcGFnaW5hdGlvbiBsb2dpY1xyXG4gICAgY29uc3QgcGFnaW5hdGlvbiA9IHBhZ2luYXRlKHJvd3NDb3VudCwgcGFnZUluZGV4LCBwYWdlU2l6ZSk7XHJcblxyXG4gICAgLy8gYXBwZW5kIHBhZ2VzXHJcbiAgICAkLmVhY2gocGFnaW5hdGlvbi5wYWdlcywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRwYWdpbmF0b3IuYXBwZW5kKGA8bGkgY2xhc3M9XCJwYWdlLWl0ZW0gJHt0aGlzID09IHBhZ2luYXRpb24uY3VycmVudFBhZ2UgPyAnYWN0aXZlJyA6ICcnfVwiPjxhIGNsYXNzPVwicGFnZS1saW5rXCIgaHJlZj1cIiNcIj4ke3RoaXN9PC9hPjwvbGk+YCk7XHJcbiAgICB9KVxyXG5cclxuICAgIC8vIGFwcGVuZCB0aGUgTmV4dCBidXR0b25cclxuICAgICRwYWdpbmF0b3IuYXBwZW5kKGBcclxuICAgICAgICAgICAgPGxpIGNsYXNzPVwicGFnZS1pdGVtXCI+XHJcbiAgICAgICAgICAgICAgICA8YSBjbGFzcz1cInBhZ2UtbGlua1wiIGhyZWY9XCIjXCI+TmV4dDwvYT5cclxuICAgICAgICAgICAgPC9saT5cclxuICAgICAgICBgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gR2V0U3RhdHVzU3BhbihzdGF0dXMpIHtcclxuICAgIHN3aXRjaCAoc3RhdHVzKSB7XHJcbiAgICAgICAgY2FzZSAxOiByZXR1cm4gYDxzcGFuIGNsYXNzPVwiYmFkZ2UgYmctd2FybmluZ1wiPlF1ZXVlZDwvc3Bhbj5gXHJcbiAgICAgICAgY2FzZSAyOiByZXR1cm4gYDxzcGFuIGNsYXNzPVwiYmFkZ2UgYmctZGFuZ2VyXCI+RmFpbGVkPC9zcGFuPmBcclxuICAgICAgICBjYXNlIDM6IHJldHVybiBgPHNwYW4gY2xhc3M9XCJiYWRnZSBiZy1zdWNjZXNzXCI+U2VudDwvc3Bhbj5gXHJcbiAgICAgICAgZGVmYXVsdDogcmV0dXJuIGA8c3BhbiBjbGFzcz1cImJhZGdlIGJnLXNlY29uZGFyeVwiPkNyZWF0ZWQ8L3NwYW4+YFxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzZXREYXRlUmFuZ2Uoc3RhcnQsIGVuZCkge1xyXG4gICAgLy8gc2V0IHRoZSB2YWx1ZXMgb2YgdGhlIHN0YXJ0ICYgZW5kIGRhdGVzXHJcbiAgICBzdGFydERhdGUgPSBzdGFydDtcclxuICAgIGVuZERhdGUgPSBlbmQ7XHJcblxyXG4gICAgLy8gc2V0IHRoZSBkYXRlIHJhbmdlIHRleHRcclxuICAgICQoJyNzZWFyY2gtcGVyaW9kIHNwYW4nKS5odG1sKHN0YXJ0LmZvcm1hdCgnTU1NTSBELCBZWVlZJykgKyAnIC0gJyArIGVuZC5mb3JtYXQoJ01NTU0gRCwgWVlZWScpKTtcclxufSJdfQ==
