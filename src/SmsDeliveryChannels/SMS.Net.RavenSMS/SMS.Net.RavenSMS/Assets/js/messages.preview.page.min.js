"function"!=typeof Object.create&&(Object.create=function(t){function o(){}return o.prototype=t,new o}),function(t,o,i,s){"use strict";var n={_positionClasses:["bottom-left","bottom-right","top-right","top-left","bottom-center","top-center","mid-center"],_defaultIcons:["success","error","info","warning"],init:function(o,i){this.prepareOptions(o,t.toast.options),this.process()},prepareOptions:function(o,i){var s={};"string"==typeof o||o instanceof Array?s.text=o:s=o,this.options=t.extend({},i,s)},process:function(){this.setup(),this.addToDom(),this.position(),this.bindToast(),this.animate()},setup:function(){var o="";if(this._toastEl=this._toastEl||t("<div></div>",{"class":"jq-toast-single"}),o+='<span class="jq-toast-loader"></span>',this.options.allowToastClose&&(o+='<span class="close-jq-toast-single">&times;</span>'),this.options.text instanceof Array){this.options.heading&&(o+='<h2 class="jq-toast-heading">'+this.options.heading+"</h2>"),o+='<ul class="jq-toast-ul">';for(var i=0;i<this.options.text.length;i++)o+='<li class="jq-toast-li" id="jq-toast-item-'+i+'">'+this.options.text[i]+"</li>";o+="</ul>"}else this.options.heading&&(o+='<h2 class="jq-toast-heading">'+this.options.heading+"</h2>"),o+=this.options.text;this._toastEl.html(o),this.options.bgColor!==!1&&this._toastEl.css("background-color",this.options.bgColor),this.options.textColor!==!1&&this._toastEl.css("color",this.options.textColor),this.options.textAlign&&this._toastEl.css("text-align",this.options.textAlign),this.options.icon!==!1&&(this._toastEl.addClass("jq-has-icon"),-1!==t.inArray(this.options.icon,this._defaultIcons)&&this._toastEl.addClass("jq-icon-"+this.options.icon)),this.options["class"]!==!1&&this._toastEl.addClass(this.options["class"])},position:function(){"string"==typeof this.options.position&&-1!==t.inArray(this.options.position,this._positionClasses)?"bottom-center"===this.options.position?this._container.css({left:t(o).outerWidth()/2-this._container.outerWidth()/2,bottom:20}):"top-center"===this.options.position?this._container.css({left:t(o).outerWidth()/2-this._container.outerWidth()/2,top:20}):"mid-center"===this.options.position?this._container.css({left:t(o).outerWidth()/2-this._container.outerWidth()/2,top:t(o).outerHeight()/2-this._container.outerHeight()/2}):this._container.addClass(this.options.position):"object"==typeof this.options.position?this._container.css({top:this.options.position.top?this.options.position.top:"auto",bottom:this.options.position.bottom?this.options.position.bottom:"auto",left:this.options.position.left?this.options.position.left:"auto",right:this.options.position.right?this.options.position.right:"auto"}):this._container.addClass("bottom-left")},bindToast:function(){var t=this;this._toastEl.on("afterShown",function(){t.processLoader()}),this._toastEl.find(".close-jq-toast-single").on("click",function(o){o.preventDefault(),"fade"===t.options.showHideTransition?(t._toastEl.trigger("beforeHide"),t._toastEl.fadeOut(function(){t._toastEl.trigger("afterHidden")})):"slide"===t.options.showHideTransition?(t._toastEl.trigger("beforeHide"),t._toastEl.slideUp(function(){t._toastEl.trigger("afterHidden")})):(t._toastEl.trigger("beforeHide"),t._toastEl.hide(function(){t._toastEl.trigger("afterHidden")}))}),"function"==typeof this.options.beforeShow&&this._toastEl.on("beforeShow",function(){t.options.beforeShow()}),"function"==typeof this.options.afterShown&&this._toastEl.on("afterShown",function(){t.options.afterShown()}),"function"==typeof this.options.beforeHide&&this._toastEl.on("beforeHide",function(){t.options.beforeHide()}),"function"==typeof this.options.afterHidden&&this._toastEl.on("afterHidden",function(){t.options.afterHidden()})},addToDom:function(){var o=t(".jq-toast-wrap");if(0===o.length?(o=t("<div></div>",{"class":"jq-toast-wrap"}),t("body").append(o)):(!this.options.stack||isNaN(parseInt(this.options.stack,10)))&&o.empty(),o.find(".jq-toast-single:hidden").remove(),o.append(this._toastEl),this.options.stack&&!isNaN(parseInt(this.options.stack),10)){var i=o.find(".jq-toast-single").length,s=i-this.options.stack;s>0&&t(".jq-toast-wrap").find(".jq-toast-single").slice(0,s).remove()}this._container=o},canAutoHide:function(){return this.options.hideAfter!==!1&&!isNaN(parseInt(this.options.hideAfter,10))},processLoader:function(){if(!this.canAutoHide()||this.options.loader===!1)return!1;var t=this._toastEl.find(".jq-toast-loader"),o=(this.options.hideAfter-400)/1e3+"s",i=this.options.loaderBg,s=t.attr("style")||"";s=s.substring(0,s.indexOf("-webkit-transition")),s+="-webkit-transition: width "+o+" ease-in;                       -o-transition: width "+o+" ease-in;                       transition: width "+o+" ease-in;                       background-color: "+i+";",t.attr("style",s).addClass("jq-toast-loaded")},animate:function(){var t=this;if(this._toastEl.hide(),this._toastEl.trigger("beforeShow"),"fade"===this.options.showHideTransition.toLowerCase()?this._toastEl.fadeIn(function(){t._toastEl.trigger("afterShown")}):"slide"===this.options.showHideTransition.toLowerCase()?this._toastEl.slideDown(function(){t._toastEl.trigger("afterShown")}):this._toastEl.show(function(){t._toastEl.trigger("afterShown")}),this.canAutoHide()){var t=this;o.setTimeout(function(){"fade"===t.options.showHideTransition.toLowerCase()?(t._toastEl.trigger("beforeHide"),t._toastEl.fadeOut(function(){t._toastEl.trigger("afterHidden")})):"slide"===t.options.showHideTransition.toLowerCase()?(t._toastEl.trigger("beforeHide"),t._toastEl.slideUp(function(){t._toastEl.trigger("afterHidden")})):(t._toastEl.trigger("beforeHide"),t._toastEl.hide(function(){t._toastEl.trigger("afterHidden")}))},this.options.hideAfter)}},reset:function(o){"all"===o?t(".jq-toast-wrap").remove():this._toastEl.remove()},update:function(t){this.prepareOptions(t,this.options),this.setup(),this.bindToast()}};t.toast=function(t){var o=Object.create(n);return o.init(t,this),{reset:function(t){o.reset(t)},update:function(t){o.update(t)}}},t.toast.options={text:"",heading:"",showHideTransition:"fade",allowToastClose:!0,hideAfter:3e3,loader:!0,loaderBg:"#9EC600",stack:5,position:"bottom-left",bgColor:!1,textColor:!1,textAlign:"left",icon:!1,beforeShow:function(){},afterShown:function(){},beforeHide:function(){},afterHidden:function(){}}}(jQuery,window,document);
function onResend() {
    // get the messageId
    const messageId = $('#SmsMessage_Id').val();

    // send an ajax request to resend request
    $.get('/ravenSMS/Messages/Preview/' + messageId + '/?handler=Resend')
        .done(function (result) {
            if (result.success) {
                $('#SmsMessage_Status').val('Queued');

                $.toast({
                    heading: 'Success',
                    text: 'the message has been queued successfully.',
                    showHideTransition: 'slide',
                    position: 'top-right',
                    icon: 'success'
                });
                return;
            }

            $.toast({
                heading: 'Failed to resend',
                text: '<p>failed to resend the message, error message:<br/>' + result.message + '</p>',
                showHideTransition: 'fade',
                position: 'top-right',
                icon: 'error'
            });
        });
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS50b2FzdC5taW4uanMiLCJwcmV2aWV3LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJtZXNzYWdlcy5wcmV2aWV3LnBhZ2UubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJmdW5jdGlvblwiIT10eXBlb2YgT2JqZWN0LmNyZWF0ZSYmKE9iamVjdC5jcmVhdGU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gbygpe31yZXR1cm4gby5wcm90b3R5cGU9dCxuZXcgb30pLGZ1bmN0aW9uKHQsbyxpLHMpe1widXNlIHN0cmljdFwiO3ZhciBuPXtfcG9zaXRpb25DbGFzc2VzOltcImJvdHRvbS1sZWZ0XCIsXCJib3R0b20tcmlnaHRcIixcInRvcC1yaWdodFwiLFwidG9wLWxlZnRcIixcImJvdHRvbS1jZW50ZXJcIixcInRvcC1jZW50ZXJcIixcIm1pZC1jZW50ZXJcIl0sX2RlZmF1bHRJY29uczpbXCJzdWNjZXNzXCIsXCJlcnJvclwiLFwiaW5mb1wiLFwid2FybmluZ1wiXSxpbml0OmZ1bmN0aW9uKG8saSl7dGhpcy5wcmVwYXJlT3B0aW9ucyhvLHQudG9hc3Qub3B0aW9ucyksdGhpcy5wcm9jZXNzKCl9LHByZXBhcmVPcHRpb25zOmZ1bmN0aW9uKG8saSl7dmFyIHM9e307XCJzdHJpbmdcIj09dHlwZW9mIG98fG8gaW5zdGFuY2VvZiBBcnJheT9zLnRleHQ9bzpzPW8sdGhpcy5vcHRpb25zPXQuZXh0ZW5kKHt9LGkscyl9LHByb2Nlc3M6ZnVuY3Rpb24oKXt0aGlzLnNldHVwKCksdGhpcy5hZGRUb0RvbSgpLHRoaXMucG9zaXRpb24oKSx0aGlzLmJpbmRUb2FzdCgpLHRoaXMuYW5pbWF0ZSgpfSxzZXR1cDpmdW5jdGlvbigpe3ZhciBvPVwiXCI7aWYodGhpcy5fdG9hc3RFbD10aGlzLl90b2FzdEVsfHx0KFwiPGRpdj48L2Rpdj5cIix7XCJjbGFzc1wiOlwianEtdG9hc3Qtc2luZ2xlXCJ9KSxvKz0nPHNwYW4gY2xhc3M9XCJqcS10b2FzdC1sb2FkZXJcIj48L3NwYW4+Jyx0aGlzLm9wdGlvbnMuYWxsb3dUb2FzdENsb3NlJiYobys9JzxzcGFuIGNsYXNzPVwiY2xvc2UtanEtdG9hc3Qtc2luZ2xlXCI+JnRpbWVzOzwvc3Bhbj4nKSx0aGlzLm9wdGlvbnMudGV4dCBpbnN0YW5jZW9mIEFycmF5KXt0aGlzLm9wdGlvbnMuaGVhZGluZyYmKG8rPSc8aDIgY2xhc3M9XCJqcS10b2FzdC1oZWFkaW5nXCI+Jyt0aGlzLm9wdGlvbnMuaGVhZGluZytcIjwvaDI+XCIpLG8rPSc8dWwgY2xhc3M9XCJqcS10b2FzdC11bFwiPic7Zm9yKHZhciBpPTA7aTx0aGlzLm9wdGlvbnMudGV4dC5sZW5ndGg7aSsrKW8rPSc8bGkgY2xhc3M9XCJqcS10b2FzdC1saVwiIGlkPVwianEtdG9hc3QtaXRlbS0nK2krJ1wiPicrdGhpcy5vcHRpb25zLnRleHRbaV0rXCI8L2xpPlwiO28rPVwiPC91bD5cIn1lbHNlIHRoaXMub3B0aW9ucy5oZWFkaW5nJiYobys9JzxoMiBjbGFzcz1cImpxLXRvYXN0LWhlYWRpbmdcIj4nK3RoaXMub3B0aW9ucy5oZWFkaW5nK1wiPC9oMj5cIiksbys9dGhpcy5vcHRpb25zLnRleHQ7dGhpcy5fdG9hc3RFbC5odG1sKG8pLHRoaXMub3B0aW9ucy5iZ0NvbG9yIT09ITEmJnRoaXMuX3RvYXN0RWwuY3NzKFwiYmFja2dyb3VuZC1jb2xvclwiLHRoaXMub3B0aW9ucy5iZ0NvbG9yKSx0aGlzLm9wdGlvbnMudGV4dENvbG9yIT09ITEmJnRoaXMuX3RvYXN0RWwuY3NzKFwiY29sb3JcIix0aGlzLm9wdGlvbnMudGV4dENvbG9yKSx0aGlzLm9wdGlvbnMudGV4dEFsaWduJiZ0aGlzLl90b2FzdEVsLmNzcyhcInRleHQtYWxpZ25cIix0aGlzLm9wdGlvbnMudGV4dEFsaWduKSx0aGlzLm9wdGlvbnMuaWNvbiE9PSExJiYodGhpcy5fdG9hc3RFbC5hZGRDbGFzcyhcImpxLWhhcy1pY29uXCIpLC0xIT09dC5pbkFycmF5KHRoaXMub3B0aW9ucy5pY29uLHRoaXMuX2RlZmF1bHRJY29ucykmJnRoaXMuX3RvYXN0RWwuYWRkQ2xhc3MoXCJqcS1pY29uLVwiK3RoaXMub3B0aW9ucy5pY29uKSksdGhpcy5vcHRpb25zW1wiY2xhc3NcIl0hPT0hMSYmdGhpcy5fdG9hc3RFbC5hZGRDbGFzcyh0aGlzLm9wdGlvbnNbXCJjbGFzc1wiXSl9LHBvc2l0aW9uOmZ1bmN0aW9uKCl7XCJzdHJpbmdcIj09dHlwZW9mIHRoaXMub3B0aW9ucy5wb3NpdGlvbiYmLTEhPT10LmluQXJyYXkodGhpcy5vcHRpb25zLnBvc2l0aW9uLHRoaXMuX3Bvc2l0aW9uQ2xhc3Nlcyk/XCJib3R0b20tY2VudGVyXCI9PT10aGlzLm9wdGlvbnMucG9zaXRpb24/dGhpcy5fY29udGFpbmVyLmNzcyh7bGVmdDp0KG8pLm91dGVyV2lkdGgoKS8yLXRoaXMuX2NvbnRhaW5lci5vdXRlcldpZHRoKCkvMixib3R0b206MjB9KTpcInRvcC1jZW50ZXJcIj09PXRoaXMub3B0aW9ucy5wb3NpdGlvbj90aGlzLl9jb250YWluZXIuY3NzKHtsZWZ0OnQobykub3V0ZXJXaWR0aCgpLzItdGhpcy5fY29udGFpbmVyLm91dGVyV2lkdGgoKS8yLHRvcDoyMH0pOlwibWlkLWNlbnRlclwiPT09dGhpcy5vcHRpb25zLnBvc2l0aW9uP3RoaXMuX2NvbnRhaW5lci5jc3Moe2xlZnQ6dChvKS5vdXRlcldpZHRoKCkvMi10aGlzLl9jb250YWluZXIub3V0ZXJXaWR0aCgpLzIsdG9wOnQobykub3V0ZXJIZWlnaHQoKS8yLXRoaXMuX2NvbnRhaW5lci5vdXRlckhlaWdodCgpLzJ9KTp0aGlzLl9jb250YWluZXIuYWRkQ2xhc3ModGhpcy5vcHRpb25zLnBvc2l0aW9uKTpcIm9iamVjdFwiPT10eXBlb2YgdGhpcy5vcHRpb25zLnBvc2l0aW9uP3RoaXMuX2NvbnRhaW5lci5jc3Moe3RvcDp0aGlzLm9wdGlvbnMucG9zaXRpb24udG9wP3RoaXMub3B0aW9ucy5wb3NpdGlvbi50b3A6XCJhdXRvXCIsYm90dG9tOnRoaXMub3B0aW9ucy5wb3NpdGlvbi5ib3R0b20/dGhpcy5vcHRpb25zLnBvc2l0aW9uLmJvdHRvbTpcImF1dG9cIixsZWZ0OnRoaXMub3B0aW9ucy5wb3NpdGlvbi5sZWZ0P3RoaXMub3B0aW9ucy5wb3NpdGlvbi5sZWZ0OlwiYXV0b1wiLHJpZ2h0OnRoaXMub3B0aW9ucy5wb3NpdGlvbi5yaWdodD90aGlzLm9wdGlvbnMucG9zaXRpb24ucmlnaHQ6XCJhdXRvXCJ9KTp0aGlzLl9jb250YWluZXIuYWRkQ2xhc3MoXCJib3R0b20tbGVmdFwiKX0sYmluZFRvYXN0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLl90b2FzdEVsLm9uKFwiYWZ0ZXJTaG93blwiLGZ1bmN0aW9uKCl7dC5wcm9jZXNzTG9hZGVyKCl9KSx0aGlzLl90b2FzdEVsLmZpbmQoXCIuY2xvc2UtanEtdG9hc3Qtc2luZ2xlXCIpLm9uKFwiY2xpY2tcIixmdW5jdGlvbihvKXtvLnByZXZlbnREZWZhdWx0KCksXCJmYWRlXCI9PT10Lm9wdGlvbnMuc2hvd0hpZGVUcmFuc2l0aW9uPyh0Ll90b2FzdEVsLnRyaWdnZXIoXCJiZWZvcmVIaWRlXCIpLHQuX3RvYXN0RWwuZmFkZU91dChmdW5jdGlvbigpe3QuX3RvYXN0RWwudHJpZ2dlcihcImFmdGVySGlkZGVuXCIpfSkpOlwic2xpZGVcIj09PXQub3B0aW9ucy5zaG93SGlkZVRyYW5zaXRpb24/KHQuX3RvYXN0RWwudHJpZ2dlcihcImJlZm9yZUhpZGVcIiksdC5fdG9hc3RFbC5zbGlkZVVwKGZ1bmN0aW9uKCl7dC5fdG9hc3RFbC50cmlnZ2VyKFwiYWZ0ZXJIaWRkZW5cIil9KSk6KHQuX3RvYXN0RWwudHJpZ2dlcihcImJlZm9yZUhpZGVcIiksdC5fdG9hc3RFbC5oaWRlKGZ1bmN0aW9uKCl7dC5fdG9hc3RFbC50cmlnZ2VyKFwiYWZ0ZXJIaWRkZW5cIil9KSl9KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLm9wdGlvbnMuYmVmb3JlU2hvdyYmdGhpcy5fdG9hc3RFbC5vbihcImJlZm9yZVNob3dcIixmdW5jdGlvbigpe3Qub3B0aW9ucy5iZWZvcmVTaG93KCl9KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLm9wdGlvbnMuYWZ0ZXJTaG93biYmdGhpcy5fdG9hc3RFbC5vbihcImFmdGVyU2hvd25cIixmdW5jdGlvbigpe3Qub3B0aW9ucy5hZnRlclNob3duKCl9KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLm9wdGlvbnMuYmVmb3JlSGlkZSYmdGhpcy5fdG9hc3RFbC5vbihcImJlZm9yZUhpZGVcIixmdW5jdGlvbigpe3Qub3B0aW9ucy5iZWZvcmVIaWRlKCl9KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLm9wdGlvbnMuYWZ0ZXJIaWRkZW4mJnRoaXMuX3RvYXN0RWwub24oXCJhZnRlckhpZGRlblwiLGZ1bmN0aW9uKCl7dC5vcHRpb25zLmFmdGVySGlkZGVuKCl9KX0sYWRkVG9Eb206ZnVuY3Rpb24oKXt2YXIgbz10KFwiLmpxLXRvYXN0LXdyYXBcIik7aWYoMD09PW8ubGVuZ3RoPyhvPXQoXCI8ZGl2PjwvZGl2PlwiLHtcImNsYXNzXCI6XCJqcS10b2FzdC13cmFwXCJ9KSx0KFwiYm9keVwiKS5hcHBlbmQobykpOighdGhpcy5vcHRpb25zLnN0YWNrfHxpc05hTihwYXJzZUludCh0aGlzLm9wdGlvbnMuc3RhY2ssMTApKSkmJm8uZW1wdHkoKSxvLmZpbmQoXCIuanEtdG9hc3Qtc2luZ2xlOmhpZGRlblwiKS5yZW1vdmUoKSxvLmFwcGVuZCh0aGlzLl90b2FzdEVsKSx0aGlzLm9wdGlvbnMuc3RhY2smJiFpc05hTihwYXJzZUludCh0aGlzLm9wdGlvbnMuc3RhY2spLDEwKSl7dmFyIGk9by5maW5kKFwiLmpxLXRvYXN0LXNpbmdsZVwiKS5sZW5ndGgscz1pLXRoaXMub3B0aW9ucy5zdGFjaztzPjAmJnQoXCIuanEtdG9hc3Qtd3JhcFwiKS5maW5kKFwiLmpxLXRvYXN0LXNpbmdsZVwiKS5zbGljZSgwLHMpLnJlbW92ZSgpfXRoaXMuX2NvbnRhaW5lcj1vfSxjYW5BdXRvSGlkZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnMuaGlkZUFmdGVyIT09ITEmJiFpc05hTihwYXJzZUludCh0aGlzLm9wdGlvbnMuaGlkZUFmdGVyLDEwKSl9LHByb2Nlc3NMb2FkZXI6ZnVuY3Rpb24oKXtpZighdGhpcy5jYW5BdXRvSGlkZSgpfHx0aGlzLm9wdGlvbnMubG9hZGVyPT09ITEpcmV0dXJuITE7dmFyIHQ9dGhpcy5fdG9hc3RFbC5maW5kKFwiLmpxLXRvYXN0LWxvYWRlclwiKSxvPSh0aGlzLm9wdGlvbnMuaGlkZUFmdGVyLTQwMCkvMWUzK1wic1wiLGk9dGhpcy5vcHRpb25zLmxvYWRlckJnLHM9dC5hdHRyKFwic3R5bGVcIil8fFwiXCI7cz1zLnN1YnN0cmluZygwLHMuaW5kZXhPZihcIi13ZWJraXQtdHJhbnNpdGlvblwiKSkscys9XCItd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIFwiK28rXCIgZWFzZS1pbjsgICAgICAgICAgICAgICAgICAgICAgIC1vLXRyYW5zaXRpb246IHdpZHRoIFwiK28rXCIgZWFzZS1pbjsgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IHdpZHRoIFwiK28rXCIgZWFzZS1pbjsgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IFwiK2krXCI7XCIsdC5hdHRyKFwic3R5bGVcIixzKS5hZGRDbGFzcyhcImpxLXRvYXN0LWxvYWRlZFwiKX0sYW5pbWF0ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYodGhpcy5fdG9hc3RFbC5oaWRlKCksdGhpcy5fdG9hc3RFbC50cmlnZ2VyKFwiYmVmb3JlU2hvd1wiKSxcImZhZGVcIj09PXRoaXMub3B0aW9ucy5zaG93SGlkZVRyYW5zaXRpb24udG9Mb3dlckNhc2UoKT90aGlzLl90b2FzdEVsLmZhZGVJbihmdW5jdGlvbigpe3QuX3RvYXN0RWwudHJpZ2dlcihcImFmdGVyU2hvd25cIil9KTpcInNsaWRlXCI9PT10aGlzLm9wdGlvbnMuc2hvd0hpZGVUcmFuc2l0aW9uLnRvTG93ZXJDYXNlKCk/dGhpcy5fdG9hc3RFbC5zbGlkZURvd24oZnVuY3Rpb24oKXt0Ll90b2FzdEVsLnRyaWdnZXIoXCJhZnRlclNob3duXCIpfSk6dGhpcy5fdG9hc3RFbC5zaG93KGZ1bmN0aW9uKCl7dC5fdG9hc3RFbC50cmlnZ2VyKFwiYWZ0ZXJTaG93blwiKX0pLHRoaXMuY2FuQXV0b0hpZGUoKSl7dmFyIHQ9dGhpcztvLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtcImZhZGVcIj09PXQub3B0aW9ucy5zaG93SGlkZVRyYW5zaXRpb24udG9Mb3dlckNhc2UoKT8odC5fdG9hc3RFbC50cmlnZ2VyKFwiYmVmb3JlSGlkZVwiKSx0Ll90b2FzdEVsLmZhZGVPdXQoZnVuY3Rpb24oKXt0Ll90b2FzdEVsLnRyaWdnZXIoXCJhZnRlckhpZGRlblwiKX0pKTpcInNsaWRlXCI9PT10Lm9wdGlvbnMuc2hvd0hpZGVUcmFuc2l0aW9uLnRvTG93ZXJDYXNlKCk/KHQuX3RvYXN0RWwudHJpZ2dlcihcImJlZm9yZUhpZGVcIiksdC5fdG9hc3RFbC5zbGlkZVVwKGZ1bmN0aW9uKCl7dC5fdG9hc3RFbC50cmlnZ2VyKFwiYWZ0ZXJIaWRkZW5cIil9KSk6KHQuX3RvYXN0RWwudHJpZ2dlcihcImJlZm9yZUhpZGVcIiksdC5fdG9hc3RFbC5oaWRlKGZ1bmN0aW9uKCl7dC5fdG9hc3RFbC50cmlnZ2VyKFwiYWZ0ZXJIaWRkZW5cIil9KSl9LHRoaXMub3B0aW9ucy5oaWRlQWZ0ZXIpfX0scmVzZXQ6ZnVuY3Rpb24obyl7XCJhbGxcIj09PW8/dChcIi5qcS10b2FzdC13cmFwXCIpLnJlbW92ZSgpOnRoaXMuX3RvYXN0RWwucmVtb3ZlKCl9LHVwZGF0ZTpmdW5jdGlvbih0KXt0aGlzLnByZXBhcmVPcHRpb25zKHQsdGhpcy5vcHRpb25zKSx0aGlzLnNldHVwKCksdGhpcy5iaW5kVG9hc3QoKX19O3QudG9hc3Q9ZnVuY3Rpb24odCl7dmFyIG89T2JqZWN0LmNyZWF0ZShuKTtyZXR1cm4gby5pbml0KHQsdGhpcykse3Jlc2V0OmZ1bmN0aW9uKHQpe28ucmVzZXQodCl9LHVwZGF0ZTpmdW5jdGlvbih0KXtvLnVwZGF0ZSh0KX19fSx0LnRvYXN0Lm9wdGlvbnM9e3RleHQ6XCJcIixoZWFkaW5nOlwiXCIsc2hvd0hpZGVUcmFuc2l0aW9uOlwiZmFkZVwiLGFsbG93VG9hc3RDbG9zZTohMCxoaWRlQWZ0ZXI6M2UzLGxvYWRlcjohMCxsb2FkZXJCZzpcIiM5RUM2MDBcIixzdGFjazo1LHBvc2l0aW9uOlwiYm90dG9tLWxlZnRcIixiZ0NvbG9yOiExLHRleHRDb2xvcjohMSx0ZXh0QWxpZ246XCJsZWZ0XCIsaWNvbjohMSxiZWZvcmVTaG93OmZ1bmN0aW9uKCl7fSxhZnRlclNob3duOmZ1bmN0aW9uKCl7fSxiZWZvcmVIaWRlOmZ1bmN0aW9uKCl7fSxhZnRlckhpZGRlbjpmdW5jdGlvbigpe319fShqUXVlcnksd2luZG93LGRvY3VtZW50KTsiLCJmdW5jdGlvbiBvblJlc2VuZCgpIHtcclxuICAgIC8vIGdldCB0aGUgbWVzc2FnZUlkXHJcbiAgICBjb25zdCBtZXNzYWdlSWQgPSAkKCcjU21zTWVzc2FnZV9JZCcpLnZhbCgpO1xyXG5cclxuICAgIC8vIHNlbmQgYW4gYWpheCByZXF1ZXN0IHRvIHJlc2VuZCByZXF1ZXN0XHJcbiAgICAkLmdldCgnL3JhdmVuU01TL01lc3NhZ2VzL1ByZXZpZXcvJyArIG1lc3NhZ2VJZCArICcvP2hhbmRsZXI9UmVzZW5kJylcclxuICAgICAgICAuZG9uZShmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgJCgnI1Ntc01lc3NhZ2VfU3RhdHVzJykudmFsKCdRdWV1ZWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkLnRvYXN0KHtcclxuICAgICAgICAgICAgICAgICAgICBoZWFkaW5nOiAnU3VjY2VzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ3RoZSBtZXNzYWdlIGhhcyBiZWVuIHF1ZXVlZCBzdWNjZXNzZnVsbHkuJyxcclxuICAgICAgICAgICAgICAgICAgICBzaG93SGlkZVRyYW5zaXRpb246ICdzbGlkZScsXHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3AtcmlnaHQnLFxyXG4gICAgICAgICAgICAgICAgICAgIGljb246ICdzdWNjZXNzJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICQudG9hc3Qoe1xyXG4gICAgICAgICAgICAgICAgaGVhZGluZzogJ0ZhaWxlZCB0byByZXNlbmQnLFxyXG4gICAgICAgICAgICAgICAgdGV4dDogJzxwPmZhaWxlZCB0byByZXNlbmQgdGhlIG1lc3NhZ2UsIGVycm9yIG1lc3NhZ2U6PGJyLz4nICsgcmVzdWx0Lm1lc3NhZ2UgKyAnPC9wPicsXHJcbiAgICAgICAgICAgICAgICBzaG93SGlkZVRyYW5zaXRpb246ICdmYWRlJyxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wLXJpZ2h0JyxcclxuICAgICAgICAgICAgICAgIGljb246ICdlcnJvcidcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbn0iXX0=
